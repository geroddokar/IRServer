(function(n,t){t(["./kendo.upload"],n)})(function(){return function(n){var t=window.kendo,r=t.ui,i=r.Upload,u=n.extend,e=n.proxy,f=i.extend({init:function(t,r){var s=this,h=r.folderUrl,f=r.async,e=f.readUrl,u=f.transportData||{path:h},o=[];e&&n.ajax({url:e,async:!1,data:typeof u=="function"?u():u,success:function(n){o=n}});r=n.extend(!0,{async:{transportData:u},files:o},r);r.name="Upload";i.fn.init.call(s,t,r)},options:{name:"EditableUpload",async:{autoUpload:!0},folderUrl:"",searchPattern:"",fileIcon:{"class":"",url:""},template:function(i){function f(n){switch(n.extension.toLowerCase()){case".jpg":case".img":case".png":case".gif":return{"class":"",url:n.url?"url('"+n.url+"')":""};case".mp3":case".wav":return{"class":"fa fa-file-audio-o",url:"none"};case".xml":case".json":return{"class":"fa fa-file-text-o",url:"none"};case".rar":case".zip":return{"class":"fa fa-file-archive-o",url:"none"};default:return{"class":"fa fa-file-o",url:"none"}}}var r=i.url,u=t.ui.getFileName(r),f=typeof t.ui.options.getFileIcon=="function"?t.ui.options.getFileIcon:f;return u&&t.template(n("#file-template").html())({Name:u,Icon:f({extension:t.ui.getFileExtension(u),url:r}),Url:r})||""},select:function(i){var u=this,f=u.options,e=f.multiple,r=f.searchPattern.toLowerCase();r&&r!="*"&&n(i.files).each(function(){if(r.search(this.extension.toLowerCase())==-1){alert(t.format("只能上传以下格式的文件：{0}。",r));i.preventDefault();return}});e&&n(i.files).each(function(){var n=u.wrapper.find(".k-filename[title='"+this.name+"']").parent().parent(".k-file-success");if(n.length)if(confirm("确定要覆盖 "+this.name+" 吗？"))t.ui.Upload.fn._removeFileEntry.call(u,n);else{i.preventDefault();return}})},upload:function(n){var i=this,r=i.options,u=r.async,t=u.transportData;n.data=typeof t=="function"?t():t},remove:function(t){var r=this,u=r.options,f=u.async,i=f.transportData;n(t.files).each(function(){if(!confirm("确定要删除 "+this.name+" 吗？")){t.preventDefault();return}});t.data=typeof i=="function"?i():i},success:function(t){var i=this;n(t.files).each(function(){var t=i.wrapper.find(".k-file[data-uid='"+this.uid+"']"),r=t.find(".file-icon"),u=t.find(".k-filename"),f=u.attr("href");r.css("background-image")!="none"&&r.css("background-image","url('"+f+"')");n(".k-upload-status",t).prepend("<span class='k-upload-pct'>100%<\/span>")})}},_prepareTemplateData:function(n,t){var f=this,e=f.options,o=e.folderUrl,u=e.fileIcon,h=t.fileNames,s=h[0],r=i.fn._prepareTemplateData.call(f,n,t);return r.extension=s.extension||"",r.file=s,r.url=o?o+"/"+n:"",r.icon=typeof u=="function"?u(r):u,r},_fileAction:function(t,r){var u=this,o=u.options,f=o.actions,e;i.fn._fileAction.call(u,t,r);r==="remove"&&f&&(e=t.find(".k-upload-status"),n.each(f,function(n,t){var r=t.title||"",f=t.actionClass||"",i=t.click,o=u._renderAction(f,r,"").appendTo(e);i&&o.click(i)}))}});r.plugin(f);u(r,{getFileName:function(n){return n&&n.replace(/^.*[\\\/]/,"")},getFileExtension:function(n){var t=n.match(/\.([^\.]+)$/);return t?t[0]:""},getFileFolderUrl:function(n){var t=n.lastIndexOf("/");return t!=-1?n.substr(0,t):n}})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});