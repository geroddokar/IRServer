(function(n,t){t(["./kendo.multiselect"],n)})(function(){return function(n){function o(t){var i=t.firstChild;return(i&&i.style.display==="none"&&(i=u(i,NEXT)),i)?n(i):i}function u(n,t){return n=n[t],n&&n.style.display==="none"&&(n=u(n,t)),n}var t=window.kendo,i=t.ui,r=i.MultiSelect,s=n.extend,h=n.proxy,f="accept",e=r.extend({init:function(i,u){var s=this,h=u.field,c=u.entity||h.replace("Id",""),f=u.dataTextField||"Name",e=u.dataValueField||"Id",l=u.placeholder||t.format("选择{0}…",u.title||""),o=u.template||t.format("#={0} ? {1} : '<空>'#",e,f),a=u.valueTemplate||o,v=u.url||"/odata/"+c,y=u.expand||t.format("?$select={0},{1}",e,f);u=n.extend(!0,{placeholder:l,dataTextField:f,dataValueField:e,dataSource:{type:"odata-v4",serverFiltering:!0,serverSorting:!0,transport:{read:v+y},sort:{field:f}},template:o,valueTemplate:a},u);u.name="MultiSelect";r.fn.init.call(s,i,u)},_selectAllBound:!1,options:{name:"EditableMultiSelect",filter:"startswith",headerTemplate:'<span class="k-item k-button k-select-all" style="width: 50%">全选<\/span><span class="k-item k-button k-unselect-all" style="width: 50%">清空<\/span>'},open:function(){var n=this;n._request&&(n._retrieveData=!1);!n.ul[0].firstChild||n._state===f||n._retrieveData?(n._state="",n._open=!0,n._retrieveData=!1,n._filterSource()):n._allowSelection()&&(n._selectAllBound==!1&&n._bindSelectAll(),n.popup.open(),n.current(n.options.highlightFirst?o(n.ul[0]):null))},_bindSelectAll:function(){var r=n(this.popup.element).find(".k-select-all"),i,t;r&&(t=this,r.click(function(){t.selectAll()}));i=n(this.popup.element).find(".k-unselect-all");i&&(t=this,i.click(function(){t.unselectAll()}));this.selectAllBound=!0},selectAll:function(){var t=this.options.dataValueField,i=n.map(this.dataSource.data(),function(n){return n[t]});this.value(i);this.trigger(CHANGE);this.element.trigger(CHANGE);this.close()},unselectAll:function(){this.value([]);this.trigger(CHANGE);this.element.trigger(CHANGE);this.close()}});i.plugin(e)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});